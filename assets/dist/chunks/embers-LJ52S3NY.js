import{a as L}from"./chunk-ZOIA4EXT.js";import{a as V}from"./chunk-PGVM55NG.js";function b(i,a=""){try{return getComputedStyle(document.documentElement).getPropertyValue(i).trim()||a}catch(e){return console.warn("[cssVars] Falha ao ler",i,e),a}}function v(i,a=0){let e=parseFloat(b(i,""));return Number.isFinite(e)?e:a}function A(i,a=0){let e=b(i,""),c=parseFloat(String(e).replace("px",""));return Number.isFinite(c)?c:a}function Q(){try{let w=function(){f=b("--ember-core",f),x=b("--ember-ring",x),y=b("--ember-glow",y),l=v("--ember-density",l),C=A("--ember-size-min",C),E=A("--ember-size-max",E),P=v("--ember-speed-min",P),S=v("--ember-speed-max",S)},k=function(){s=window.innerWidth,d=window.innerHeight,a.width=Math.floor(s*c),a.height=Math.floor(d*c),a.style.width=s+"px",a.style.height=d+"px",e.setTransform(c,0,0,c,0,0)},O=function(){let t=window.innerWidth,r;return t<576?r=18:t<992?r=26:r=34,Math.max(8,Math.min(60,Math.round(r*l)))},m=function(t,r){return Math.random()*(r-t)+t},H=function(t,r,o){return Math.max(r,Math.min(o,t))},N=function(){let t=d*.62,r=d*.98,o;if(Math.random()<.4){let Y=Math.random()<.5,G=Math.max(30,s*.12);o=Y?m(0,G):m(s-G,s)}else o=m(0,s);let R=m(t,r),g=m(C,E),h=-m(P,S)/60,W=m(-.15,.15),q=Math.random()*Math.PI*2,T=.15+Math.random()*.25;return{x:o,y:R,r:g,vx:W,vy:h,phase:q,twinkle:T}},p=function(){let t=O();u=new Array(t).fill(0).map(N)},I=function(){let t=document.documentElement.getAttribute("data-theme")==="dark";e.globalCompositeOperation="lighter",e.clearRect(0,0,s,d),e.shadowColor=y,e.shadowBlur=t?8:6;let r=performance.now()/1e3;for(let o=0;o<u.length;o++){let n=u[o],R=Math.sin(r*.7+n.phase)*.12;n.x+=n.vx+R,n.y+=n.vy;let g=n.r*(1+Math.sin(r*2.2+n.phase)*n.twinkle*.18),h=e.createRadialGradient(n.x,n.y,0,n.x,n.y,g*2.6);h.addColorStop(0,f),h.addColorStop(.45,x),h.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=h,e.beginPath(),e.arc(n.x,n.y,g,0,Math.PI*2),e.closePath(),e.fill(),n.y+g<-10&&(u[o]=N(),u[o].y=d+m(0,14)),n.x<-20&&(n.x=s+20),n.x>s+20&&(n.x=-20)}M=requestAnimationFrame(I)},i=L();if(document.getElementById("bg-embers"))return;let a=document.createElement("canvas");a.id="bg-embers",a.setAttribute("aria-hidden","true"),document.body.appendChild(a);let e=a.getContext("2d"),c=Math.max(1,Math.min(window.devicePixelRatio||1,2)),s=0,d=0,f="rgba(255, 232, 170, 0.85)",x="rgba(255, 168, 88, 0.85)",y="rgba(255, 150, 70, 0.45)",l=.9,C=1.8,E=3.4,P=22,S=48,u=[],M=null,D=new MutationObserver(t=>{let r=!1;for(let o of t)if(o.attributeName==="data-theme"||o.attributeName==="style"){r=!0;break}if(r){let o=l;w(),Math.abs(o-l)>.01&&p()}});if(D.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme","style"]}),k(),w(),p(),console.debug("[embers] init",{reduced:i,dpr:c,count:u.length}),!i)M=requestAnimationFrame(I);else{e.globalCompositeOperation="lighter",e.clearRect(0,0,s,d),e.shadowColor=y,e.shadowBlur=document.documentElement.getAttribute("data-theme")==="dark"?8:6;for(let t of u){let r=e.createRadialGradient(t.x,t.y,0,t.x,t.y,t.r*2.4);r.addColorStop(0,f),r.addColorStop(.45,x),r.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=r,e.beginPath(),e.arc(t.x,t.y,t.r,0,Math.PI*2),e.closePath(),e.fill()}}let B=()=>{k(),p()};window.addEventListener("resize",B);let z=V("theme:changed",()=>{let t=l;w(),Math.abs(t-l)>.01&&p()}),F=V("embers:settings",()=>{let t=l;w(),Math.abs(t-l)>.01&&p()});window.addEventListener("beforeunload",()=>{try{window.removeEventListener("resize",B),D.disconnect(),M&&cancelAnimationFrame(M),z==null||z(),F==null||F()}catch{}})}catch(i){console.error("Erro ao inicializar embers:",i)}}export{Q as initEmbers};
