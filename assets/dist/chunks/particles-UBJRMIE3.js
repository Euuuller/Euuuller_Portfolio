function z(){try{let p=function(){i=window.innerWidth,c=window.innerHeight,e.width=Math.floor(i*d),e.height=Math.floor(c*d),e.style.width=i+"px",e.style.height=c+"px",t.setTransform(d,0,0,d,0,0)},y=function(){let r=f();m=new Array(r).fill(0).map(()=>P())},P=function(){let r=h(1.3,3.2),a=o?0:h(.06,.28),n=h(0,Math.PI*2),u=Math.cos(n)*a,l=Math.sin(n)*a;return{x:h(0,i),y:h(0,c),vx:u,vy:l,r,twinkle:Math.random()<.15?h(.02,.06):0}},x=function(){let r=document.documentElement.getAttribute("data-theme")==="dark";t.shadowColor=s,t.shadowBlur=r?6:4,t.clearRect(0,0,i,c),t.fillStyle=s;for(let a=0;a<m.length;a++){let n=m[a];n.x+=n.vx,n.y+=n.vy,n.x<-10&&(n.x=i+10),n.x>i+10&&(n.x=-10),n.y<-10&&(n.y=c+10),n.y>c+10&&(n.y=-10);let u=n.twinkle?Math.sin(Date.now()*n.twinkle)*.02:0;if(u!==0){let l=R(s),w=C(l.a+u,.05,.14);t.fillStyle=`rgba(${l.r}, ${l.g}, ${l.b}, ${w})`}else t.fillStyle=s;t.beginPath(),t.arc(n.x,n.y,n.r,0,Math.PI*2),t.closePath(),t.fill()}b=requestAnimationFrame(x)},o=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(document.getElementById("bg-particles"))return;let e=document.createElement("canvas");e.id="bg-particles",e.setAttribute("aria-hidden","true"),document.body.appendChild(e);let t=e.getContext("2d"),d=Math.max(1,Math.min(window.devicePixelRatio||1,2)),i=0,c=0,f=()=>{let r=window.innerWidth;return r<576?22:r<992?32:44},g=()=>{let r=document.documentElement,a=r.getAttribute("data-theme")==="dark",n=getComputedStyle(r),u=a?"--text-secondary":"--text-tertiary",l=a?"#cccccc":"#666666",w=n.getPropertyValue(u).trim()||l,{r:k,g:E,b:A}=$(w);return`rgba(${k}, ${E}, ${A}, ${a?.11:.15})`},m=[],s=g(),b=null,M=new MutationObserver(r=>{for(let a of r)if(a.attributeName==="data-theme"){s=g();break}});if(M.observe(document.documentElement,{attributes:!0}),p(),y(),s=g(),console.debug("[particles] init",{prefersReducedMotion:o,dpr:d,count:m.length}),!o)b=requestAnimationFrame(x);else{t.clearRect(0,0,i,c),t.fillStyle=s,t.shadowColor=s,t.shadowBlur=document.documentElement.getAttribute("data-theme")==="dark"?6:4;for(let r of m)t.beginPath(),t.arc(r.x,r.y,r.r,0,Math.PI*2),t.closePath(),t.fill()}let v=()=>{p(),y()};window.addEventListener("resize",v),window.addEventListener("beforeunload",()=>{try{window.removeEventListener("resize",v),M.disconnect(),b&&cancelAnimationFrame(b)}catch{}})}catch(o){console.error("Erro ao inicializar part\xEDculas:",o)}}function h(o,e){return Math.random()*(e-o)+o}function C(o,e,t){return Math.max(e,Math.min(t,o))}function $(o){let e=o.replace("#","").trim();e.length===3&&(e=e.split("").map(f=>f+f).join(""));let t=parseInt(e,16),d=t>>16&255,i=t>>8&255,c=t&255;return{r:d,g:i,b:c}}function R(o){let e=o.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([0-9]*\.?[0-9]+)\)/);return e?{r:Number(e[1]),g:Number(e[2]),b:Number(e[3]),a:Number(e[4])}:{r:0,g:0,b:0,a:.08}}export{z as initParticles};
