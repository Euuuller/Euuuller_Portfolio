/* ==========================================
   FUNDO GALÁXIA E CANVAS DE PARTÍCULAS
   ========================================== */

.galaxy-bg {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  /* Offsets de parallax (percentuais) */
  --g1-ox: 0%; --g1-oy: 0%;
  --g2-ox: 0%; --g2-oy: 0%;
  --g3-ox: 0%; --g3-oy: 0%;
  --g4-ox: 0%; --g4-oy: 0%;
  /* Variáveis animáveis para drift das nebulosas */
  --g1-x: 12%;
  --g1-y: 18%;
  --g2-x: 82%;
  --g2-y: 28%;
  --g3-x: 30%;
  --g3-y: 82%;
  --g4-x: 92%;
  --g4-y: 92%;

  /* Camadas: nebulosas + núcleo + estrelas (duas densidades) */
  background:
    radial-gradient(1200px 800px at calc(var(--g1-x) + var(--g1-ox)) calc(var(--g1-y) + var(--g1-oy)), var(--galaxy-nebula-1), transparent 62%),
    radial-gradient(1100px 1000px at calc(var(--g2-x) + var(--g2-ox)) calc(var(--g2-y) + var(--g2-oy)), var(--galaxy-nebula-2), transparent 64%),
    radial-gradient(900px 900px at calc(var(--g3-x) + var(--g3-ox)) calc(var(--g3-y) + var(--g3-oy)), var(--galaxy-nebula-3), transparent 60%),
    radial-gradient(700px 600px at calc(var(--g4-x) + var(--g4-ox)) calc(var(--g4-y) + var(--g4-oy)), var(--galaxy-nebula-4), transparent 64%),
    radial-gradient(1800px 1400px at 50% 42%, var(--galaxy-core-1), transparent 70%),
    radial-gradient(1600px 1200px at 60% 30%, var(--galaxy-core-2), transparent 72%),
    repeating-radial-gradient(closest-side at 40% 55%, var(--stars-color) 0, var(--stars-color) 1px, transparent 2px, transparent 6px),
    repeating-radial-gradient(closest-side at 60% 35%, var(--stars-strong) 0, var(--stars-strong) 1.2px, transparent 2.2px, transparent 7px);
  filter: saturate(var(--galaxy-saturation)) contrast(var(--galaxy-contrast)) brightness(var(--galaxy-brightness));
  animation: galaxy-drift 36s ease-in-out infinite;
}

.galaxy-bg::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(closest-side at 50% 28%, rgba(0,0,0,var(--galaxy-vignette)), transparent 65%);
  mix-blend-mode: multiply;
}

.galaxy-bg::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(farthest-side at 60% 80%, rgba(255,255,255,var(--dust-opacity)), transparent 70%);
}

@keyframes galaxy-drift {
  0% { --g1-x: 12%; --g2-x: 82%; --g3-x: 30%; --g4-x: 92%; }
  50% { --g1-x: 16%; --g2-x: 78%; --g3-x: 26%; --g4-x: 88%; }
  100% { --g1-x: 12%; --g2-x: 82%; --g3-x: 30%; --g4-x: 92%; }
}

/* Camada de estrelas para twinkle controlado por animação */
.galaxy-stars {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  background:
    repeating-radial-gradient(closest-side at 40% 55%, var(--stars-color) 0, var(--stars-color) 1px, transparent 2px, transparent 6px),
    repeating-radial-gradient(closest-side at 60% 35%, var(--stars-strong) 0, var(--stars-strong) 1.2px, transparent 2.2px, transparent 7px);
  animation: stars-twinkle 9s ease-in-out infinite alternate;
}

@keyframes stars-twinkle {
  0%   { opacity: 0.86; }
  50%  { opacity: 1.00; }
  100% { opacity: 0.90; }
}

#bg-particles {
  position: fixed;
  inset: 0;
  z-index: 1;
  pointer-events: none;
}

/* Canvas de embers (partículas de fogo) */
#bg-embers {
  position: fixed;
  inset: 0;
  z-index: 2;
  pointer-events: none;
}

/* Fallback do body caso o fundo não carregue */
body {
  background-color: var(--bg-primary);
}